# Migration `20200818215423`

This migration has been generated by Grant Forrest at 8/18/2020, 5:54:23 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Group" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Fund" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
"groupId" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Account" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
"stripeId" text  NOT NULL ,
"userId" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."_GroupToUser" (
"A" text  NOT NULL ,
"B" text  NOT NULL )

CREATE UNIQUE INDEX "_GroupToUser_AB_unique" ON "public"."_GroupToUser"("A","B")

CREATE  INDEX "_GroupToUser_B_index" ON "public"."_GroupToUser"("B")

ALTER TABLE "public"."Fund" ADD FOREIGN KEY ("groupId")REFERENCES "public"."Group"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Account" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_GroupToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Group"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_GroupToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200816190731..20200818215423
--- datamodel.dml
+++ datamodel.dml
@@ -1,18 +1,42 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
-  provider = "prisma-client-js"
+  provider        = "prisma-client-js"
+  previewFeatures = ["aggregateApi"]
 }
-// This "Example" model has been generated for you by Nexus.
-// Nexus does this when you do not have any models defined.
-// For more detail and examples of working with your Prisma
-// Schema, refer to its complete docs at https://pris.ly/d/prisma-schema.
+generator typegraphql {
+  provider = "node node_modules/typegraphql-prisma/generator.js"
+}
-model Todo {
-  id          Int    @default(autoincrement()) @id
-  description String
+model User {
+  id       String    @id @default(cuid())
+  name     String
+  groups   Group[]   @relation(references: [id])
+  accounts Account[]
 }
+
+model Group {
+  id    String @id @default(cuid())
+  name  String
+  users User[] @relation(references: [id])
+  funds Fund[]
+}
+
+model Fund {
+  id      String @id @default(cuid())
+  name    String
+  group   Group  @relation(fields: [groupId], references: [id])
+  groupId String
+}
+
+model Account {
+  id       String @id @default(cuid())
+  name     String
+  stripeId String
+  user     User   @relation(fields: [userId], references: [id])
+  userId   String
+}
```


